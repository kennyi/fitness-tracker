<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FitTracker Debug</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .debug-section { background: #f0f0f0; padding: 20px; margin: 10px 0; border-radius: 8px; }
        button { padding: 10px 20px; margin: 5px; background: #667eea; color: white; border: none; border-radius: 4px; cursor: pointer; }
        button:hover { background: #5a6fd8; }
        .log { background: #000; color: #0f0; padding: 10px; font-family: monospace; height: 200px; overflow-y: scroll; margin-top: 10px; }
    </style>
</head>
<body>
    <h1>🔧 FitTracker Debug Panel</h1>
    
    <div class="debug-section">
        <h3>Basic Function Tests</h3>
        <button onclick="testNavigation()">Test Navigation</button>
        <button onclick="testTabSwitching()">Test Tab Switching</button>
        <button onclick="testExerciseToggle()">Test Exercise Toggle</button>
        <button onclick="clearLog()">Clear Log</button>
    </div>
    
    <div class="debug-section">
        <h3>DOM Element Check</h3>
        <button onclick="checkElements()">Check All Elements</button>
        <button onclick="checkEventListeners()">Check Event Listeners</button>
    </div>
    
    <div class="debug-section">
        <h3>Console Output</h3>
        <div id="debug-log" class="log"></div>
    </div>
    
    <!-- Include the main app in an iframe for testing -->
    <div class="debug-section">
        <h3>Live App</h3>
        <iframe src="index.html" width="100%" height="600" style="border: 1px solid #ccc;"></iframe>
    </div>

    <script>
        // Override console.log to display in our debug panel
        const originalLog = console.log;
        const debugLog = document.getElementById('debug-log');
        
        console.log = function(...args) {
            originalLog.apply(console, args);
            const message = args.join(' ');
            debugLog.innerHTML += '<div>' + new Date().toLocaleTimeString() + ': ' + message + '</div>';
            debugLog.scrollTop = debugLog.scrollHeight;
        };
        
        function clearLog() {
            debugLog.innerHTML = '';
        }
        
        function testNavigation() {
            console.log('🧪 Testing Navigation Functions...');
            
            // Test if functions exist
            const iframe = document.querySelector('iframe');
            const iframeWindow = iframe.contentWindow;
            
            if (iframeWindow.goToNextDay) {
                console.log('✅ goToNextDay function exists');
                console.log('🔄 Calling goToNextDay...');
                iframeWindow.goToNextDay();
            } else {
                console.log('❌ goToNextDay function NOT found');
            }
            
            if (iframeWindow.goToPreviousDay) {
                console.log('✅ goToPreviousDay function exists');
            } else {
                console.log('❌ goToPreviousDay function NOT found');
            }
        }
        
        function testTabSwitching() {
            console.log('🧪 Testing Tab Switching...');
            
            const iframe = document.querySelector('iframe');
            const iframeWindow = iframe.contentWindow;
            
            if (iframeWindow.switchTab) {
                console.log('✅ switchTab function exists');
                console.log('🔄 Switching to Progress tab...');
                iframeWindow.switchTab('progress');
                
                setTimeout(() => {
                    console.log('🔄 Switching back to Workout tab...');
                    iframeWindow.switchTab('workout');
                }, 2000);
            } else {
                console.log('❌ switchTab function NOT found');
            }
        }
        
        function testExerciseToggle() {
            console.log('🧪 Testing Exercise Toggle...');
            
            const iframe = document.querySelector('iframe');
            const iframeDoc = iframe.contentDocument;
            const firstCheckbox = iframeDoc.querySelector('.exercise-checkbox');
            
            if (firstCheckbox) {
                console.log('✅ Found exercise checkbox');
                console.log('🔄 Clicking checkbox...');
                firstCheckbox.click();
            } else {
                console.log('❌ No exercise checkbox found');
            }
        }
        
        function checkElements() {
            console.log('🧪 Checking DOM Elements...');
            
            const iframe = document.querySelector('iframe');
            const iframeDoc = iframe.contentDocument;
            
            const elements = [
                'prev-day-btn',
                'next-day-btn',
                'current-date',
                'current-day-message',
                'daily-progress',
                'workouts-completed',
                'current-streak',
                'total-workouts'
            ];
            
            elements.forEach(id => {
                const element = iframeDoc.getElementById(id);
                if (element) {
                    console.log(`✅ Element found: ${id}`);
                } else {
                    console.log(`❌ Element missing: ${id}`);
                }
            });
            
            const weekBtns = iframeDoc.querySelectorAll('.week-btn');
            console.log(`📊 Week buttons found: ${weekBtns.length}`);
            
            const navItems = iframeDoc.querySelectorAll('.nav-item');
            console.log(`📊 Nav items found: ${navItems.length}`);
            
            const checkboxes = iframeDoc.querySelectorAll('.exercise-checkbox');
            console.log(`📊 Exercise checkboxes found: ${checkboxes.length}`);
        }
        
        function checkEventListeners() {
            console.log('🧪 Checking Event Listeners...');
            
            const iframe = document.querySelector('iframe');
            const iframeDoc = iframe.contentDocument;
            
            // Test if buttons respond to clicks
            const prevBtn = iframeDoc.getElementById('prev-day-btn');
            const nextBtn = iframeDoc.getElementById('next-day-btn');
            
            if (prevBtn) {
                console.log('🔄 Testing previous button click...');
                prevBtn.click();
            }
            
            if (nextBtn) {
                setTimeout(() => {
                    console.log('🔄 Testing next button click...');
                    nextBtn.click();
                }, 1000);
            }
        }
        
        // Auto-run basic checks when iframe loads
        setTimeout(() => {
            console.log('🚀 Auto-running debug checks...');
            checkElements();
        }, 2000);
    </script>
</body>
</html>